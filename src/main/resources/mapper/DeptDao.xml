<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.wl.college.dao.DeptDao">

    <insert id="create" useGeneratedKeys="true" keyProperty="dept.id">
        INSERT INTO dept (name,manager_id,country,city,town,address,area,state,expiration_time,bank_card,pid) VALUES (#{dept.name},
        #{dept.managerId},#{dept.country},#{dept.city},#{dept.town},#{dept.address},#{dept.area},#{dept.state},
        #{dept.expirationTime},#{dept.bankCard},#{dept.pid});
    </insert>
    <update id="update">
        update dept
        <set>
            <if test="dept.name != null">
                `name` = #{dept.name},
            </if>
            <if test="dept.country != null">
                country = #{dept.country},
            </if>
            <if test="dept.city != null">
                city = #{dept.city},
            </if>
            <if test="dept.town != null">
                town = #{dept.town},
            </if>
            <if test="dept.address != null">
                address = #{dept.address},
            </if>
            <if test="dept.area != null">
                area = #{dept.area},
            </if>
            <if test="dept.state != null">
                state = #{dept.state},
            </if>
            <if test="dept.expirationTime != null">
                expiration_time = #{dept.expirationTime},
            </if>
            <if test="dept.license != null">
                license = #{dept.license},
            </if>
            <if test="dept.licenseImg != null">
                license_img = #{dept.licenseImg},
            </if>
        </set>
        where id =#{dept.id}
    </update>
    <update id="updateState">
          update dept set state=#{state} where id=#{id}
    </update>
    <select id="findById" resultType="com.wl.college.entity.Dept">
        SELECT id, name, manager_id, country, city, town, address, area, license, bank_card, create_time,
    update_time, state, pid, pids, expiration_time,license_img FROM  dept where id=#{id}
    </select>
</mapper>